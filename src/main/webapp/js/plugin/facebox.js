(function(g){var f=(g(window).width()-g("#facebox .facecontent").width())/2;g.facebox=function(n,m){g.facebox.loading();if(n.ajax){h(n.ajax)}else{if(n.image){c(n.image)}else{if(n.div){k(n.div)}else{if(g.isFunction(n)){n.call(g)}else{g.facebox.reveal(n,m)}}}}};g.extend(g.facebox,{settings:{opacity:0.6,overlay:true,loadingImage:baseAddr+"css/images/loading.gif",closeImage:baseAddr+"css/images/closelabel.gif",imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;">       <div class="popup">               <div class="body">               	<a href="#" class="close"><img src="'+baseAddr+'css/images/closelabel.gif" border="0" />              	</a> 			  	<div class=facetitle></div>               	<div class="facecontent"></div>               </div>       </div>     </div>'},loading:function(){l();if(g("#facebox .loading").length==1){return true}e();g("#facebox .facecontent").empty();g("#facebox .body").children().hide().end().append('<div class="loading"><img src="'+g.facebox.settings.loadingImage+'"/></div>');g("#facebox").css({top:i()[1]+(j()/8),left:(g(window).width()-g("#facebox .facecontent").width())/2}).show();g(document).bind("keydown.facebox",function(m){if(m.keyCode==27){g.facebox.close()}return true});g(document).trigger("loading.facebox")},reveal:function(n,m){g(document).trigger("beforeReveal.facebox");if(m){g("#facebox .facecontent").addClass(m)}g("#facebox .facecontent").html(n);g("#facebox .loading").remove();g("#facebox .body").children().fadeIn("normal");g("#facebox").css("left",f);g(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},close:function(){g(document).trigger("close.facebox");return false}});g.fn.faceboxReady=function(m){l(m);function n(){g.facebox.loading(true);var o=this.rel.match(/facebox\[?\.(\w+)\]?/);g("#facebox .facetitle").html(this.title);if(o){o=o[1]}if(g(this).attr("size")=="s"){g("#facebox .facecontent").css({width:"400px"});g("#facebox .facecontent").css({padding:"20px"});f=(g(window).width()-g("#facebox .facecontent").width())/2}else{if(g(this).attr("size")=="ss"){g("#facebox .facecontent").css({width:"330px"});g("#facebox .facecontent").css({padding:"0px"});f=(g(window).width()-g("#facebox .facecontent").width())/2}else{g("#facebox .facecontent").css({width:"700px"});g("#facebox .facecontent").css({padding:"20px"});f=(g(window).width()-g("#facebox .facecontent").width())/2}}k(this.href,o);return false}return this.click(n)};function l(o){if(g.facebox.settings.inited){return true}else{g.facebox.settings.inited=true}g(document).trigger("init.facebox");d();var m=g.facebox.settings.imageTypes.join("|");g.facebox.settings.imageTypesRegexp=new RegExp("."+m+"$","i");if(o){g.extend(g.facebox.settings,o)}if(g("#facebox").length==0){g("body").append(g.facebox.settings.faceboxHtml)}var n=[new Image(),new Image()];n[0].src=g.facebox.settings.closeImage;n[1].src=g.facebox.settings.loadingImage;g("#facebox").find(".b:first, .bl, .br, .tl, .tr").each(function(){n.push(new Image());n.slice(-1).src=g(this).css("background-image").replace(/url\((.+)\)/,"$1")});g("#facebox .close").click(g.facebox.close);g("#facebox .close_image").attr("src",g.facebox.settings.closeImage)}function i(){var n,m;if(self.pageYOffset){m=self.pageYOffset;n=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){m=document.documentElement.scrollTop;n=document.documentElement.scrollLeft}else{if(document.body){m=document.body.scrollTop;n=document.body.scrollLeft}}}return new Array(n,m)}function j(){var m;if(self.innerHeight){m=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){m=document.documentElement.clientHeight}else{if(document.body){m=document.body.clientHeight}}}return m}function d(){var m=g.facebox.settings;m.loadingImage=m.loading_image||m.loadingImage;m.closeImage=m.close_image||m.closeImage;m.imageTypes=m.image_types||m.imageTypes;m.faceboxHtml=m.facebox_html||m.faceboxHtml}function k(n,m){if(n.match(/#/)){var o=window.location.href.split("#")[0];var p=n.replace(o,"");g.facebox.reveal(g(p).clone().show(),m)}else{if(n.match(g.facebox.settings.imageTypesRegexp)){c(n,m)}else{h(n,m)}}}function c(n,m){var o=new Image();o.onload=function(){g.facebox.reveal('<div class="image"><img src="../widged/'+o.src+'" /></div>',m)};o.src=n}function h(n,m){g.get(n,"",function(o){g.facebox.reveal(o,m)})}function b(){return g.facebox.settings.overlay==false||g.facebox.settings.opacity===null}function e(){if(b()){return}if(g("#facebox_overlay").length==0){g("body").append('<div id="facebox_overlay" class="facebox_hide"></div>')}g("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",g.facebox.settings.opacity).fadeIn(200);return false}function a(){if(b()){return}g("#facebox_overlay").fadeOut(200,function(){g("#facebox_overlay").removeClass("facebox_overlayBG");g("#facebox_overlay").addClass("facebox_hide");g("#facebox_overlay").remove()});return false}g(document).bind("close.facebox",function(){g(document).unbind("keydown.facebox");g("#facebox").fadeOut(function(){g("#facebox .facecontent").removeClass().addClass("facecontent");a();g("#facebox .loading").remove()})});g(window).resize(function(){if(g("#facebox").css("display")=="block"){g("#facebox").css({left:(g(window).width()-g("#facebox .facecontent").width())/2})}})})(jQuery);function facebox_start(a){$("a[rel="+a+"]").faceboxReady();$("a[rel="+a+"]").attr("rel",a+"ready")}function facebox_close(){$(document).trigger("close.facebox");return false};